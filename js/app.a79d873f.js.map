{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?4241","webpack:///./src/components/BaseModel.vue?7914","webpack:///./src/App.vue?a135","webpack:///./src/App.vue?bff9","webpack:///./src/views/Home.vue?a211","webpack:///./src/components/BaseModel.vue?5ecd","webpack:///./src/utils/class_names.js","webpack:///./src/utils/utils.js","webpack:///./src/utils/visualize.js","webpack:///./src/utils/model.js","webpack:///src/components/BaseModel.vue","webpack:///./src/components/BaseModel.vue?db10","webpack:///./src/components/BaseModel.vue?3f06","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue","webpack:///./src/views/Train.vue?2e73","webpack:///./src/components/LearnableModel.vue?3313","webpack:///./src/utils/data.js","webpack:///src/components/LearnableModel.vue","webpack:///./src/components/LearnableModel.vue?3bdd","webpack:///./src/components/LearnableModel.vue?b3bd","webpack:///src/views/Train.vue","webpack:///./src/views/Train.vue?638e","webpack:///./src/views/Train.vue","webpack:///./src/router.js","webpack:///./src/main.js","webpack:///./src/components/LearnableModel.vue?8795"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_BaseModel_vue_vue_type_style_index_0_id_e8ae755e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_BaseModel_vue_vue_type_style_index_0_id_e8ae755e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_174d042a_render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","tag","to","_v","staticRenderFns","script","component","componentNormalizer","App","Homevue_type_template_id_4fb22106_render","Homevue_type_template_id_4fb22106_staticRenderFns","BaseModelvue_type_template_id_e8ae755e_scoped_true_render","active","loadingModelOver","can-cancel","is-full-page","color","_s","getLengthNames","labels","checked","unchecked","width","model","callback","$$v","toggleBigModel","expression","_m","min","max","interval","brushWidth","options","getBar","autoresize","on","click","$event","submitDrawing","clearCanvas","columns","tableColumns","rows","tableRows","max-height","fixed-header","BaseModelvue_type_template_id_e8ae755e_scoped_true_staticRenderFns","height","SMALL_CLASS_NAMES","BIG_CLASS_NAMES","preprocess","img","tf","tensor","fromPixels","resized","resizeBilinear","toFloat","offset","normalized","sub","div","batched","expandDims","openVisor","visorInstance","tfvis","isOpen","toggle","getFitCallbacks","metrics","container","tab","styles","fitCallbacks","showClassAccuracy","preds","class_names","perClassAccuracy","then","classAccuracy","showConfusionMatrix","confusionMatrix","confMatrix","showModelInspection","tabName","modelSummarySurface","conv1Surface","conv2Surface","denseSurface","modelSummary","layer","getLayer","showInputData","inputSurface","surface","inputSurface_drawArea","drawArea","innerHTML","arr","map","reshape","renderInputTable","showActivations","conv1ActivationSurface","conv1ActivationSurface_drawArea","conv2ActivationSurface","conv2ActivationSurface_drawArea","_tf$tidy","getActivationTable","_tf$tidy2","slicedToArray","filters","filterActivations","_tf$tidy3","_tf$tidy4","filters_2","filterActivations_2","renderImageTable","samples","_loop","imageTensor","canvas","document","createElement","style","toPixels","appendChild","dispose","renderImage","imageOpts","resizeNearestNeighbor","clipByValue","querySelector","concat","headerData","table","d3","select","size","append","headers","selectAll","headersEnter","enter","merge","each","group","node","rowsEnter","cells","cellsEnter","exit","remove","getActivation","input","activationModel","inputs","outputs","output","predict","layerName","exampleImageSize","kernel","val","transpose","unstack","shape","unshift","xs","numExamples","activations","activationImageSize","numFilters","activation","unpackedActivations","Array","fill","_","inputExample","TFModel","classCallCheck","numConv1","arguments","undefined","numConv2","numDense","numClasses","IMAGE_WIDTH","IMAGE_HEIGHT","IMAGE_CHANNELS","add","conv2d","inputShape","kernelSize","strides","kernelInitializer","maxPooling2d","poolSize","flatten","dense","units","dropout","rate","compile","optimizer","adam","loss","categoricalCrossentropy","dataSync","_this","BATCH_SIZE","buildXs","buildYs","indexOf","trainXs","trainYs","fit","batchSize","validationData","epochs","shuffle","validationSplit","callbacks","argMax","path_to_layers","_this2","_this3","preprocessed_img","disposeTFVariables","SMALL_MODEL_URL","BIG_MODEL_URL","BaseModelvue_type_script_lang_js_","components","v-chart","ECharts","VueGoodTable","vue_good_table_es","VueSlider","vue_slider_component_umd_min_default","a","Loading","vue_loading_min_default","raw_predictions","mousePressed","coords","small_ranking","big_ranking","label","field","type","methods","recordCoor","e","pointer","getPointer","event","posX","x","posY","y","getMinBox","coorX","coorY","min_coords","Math","max_coords","submitCanvas","input_img","getImageData","big_model","predictClass","small_model","winClass","getTopClassNames","$toasted","show","clear","backgroundColor","mbb","dpi","devicePixelRatio","imgData","contextContainer","keys","class","submitted","computed","findIndicesOfMax","outp","pred","sort","b","pop","findTopValues","indices","getClassNames","xAxis","axisLabel","rotate","yAxis","series","watch","freeDrawingBrush","mounted","entries","forEach","fabric","Canvas","isDrawingMode","renderAll","that","model_TFModel","Promise","all","loadModel","beforeDestroy","components_BaseModelvue_type_script_lang_js_","BaseModel_component","BaseModel","Homevue_type_script_lang_js_","views_Homevue_type_script_lang_js_","Home_component","Home","Trainvue_type_template_id_a378d702_render","Trainvue_type_template_id_a378d702_staticRenderFns","LearnableModelvue_type_template_id_6887bfb4_scoped_true_render","storeDrawing","trainModel","showVisor","removeAllPhotos","LearnableModelvue_type_template_id_6887bfb4_scoped_true_staticRenderFns","PhotosDAO","db_name","store_name","openDB","upgrade","db","objectStoreNames","contains","createObjectStore","autoIncrement","low","high","getAll","IDBKeyRange","bound","count","deleteDB","LearnableModelvue_type_script_lang_js_","numEpochs","get_all_photos","photos","resetModel","build_CNN","train_CNN","getModel","count_photos","get_range_photos","obj","img_data","add_photo","_this4","remove_all_items","_this5","data_PhotosDAO","drop_database","components_LearnableModelvue_type_script_lang_js_","LearnableModel_component","LearnableModel","Trainvue_type_script_lang_js_","views_Trainvue_type_script_lang_js_","Train_component","Train","Vue","use","Router","router","routes","path","Toasted","position","duration","className","ToggleButton","config","productionTip","render","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LearnableModel_vue_vue_type_style_index_0_id_6887bfb4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LearnableModel_vue_vue_type_style_index_0_id_6887bfb4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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,OAAsC,GAAAvC,EAAA,OAAgBI,YAAA,WAAsB,CAAAJ,EAAA,UAAeI,YAAA,cAAAoC,GAAA,CAA8BC,MAAA,SAAAC,GAAyB,OAAA9C,EAAA+C,mBAA6B,CAAA/C,EAAAW,GAAA,YAAAP,EAAA,UAAkCI,YAAA,gBAAAoC,GAAA,CAAgCC,MAAA,SAAAC,GAAyB,OAAA9C,EAAAgD,iBAA2B,CAAAhD,EAAAW,GAAA,aAAAP,EAAA,OAAgCI,YAAA,WAAsB,CAAAJ,EAAA,kBAAuBE,MAAA,CAAO2C,QAAAjD,EAAAkD,aAAAC,KAAAnD,EAAAoD,YAAAC,aAAA,QAAAC,gBAAA,MAA4F,QAC9+CC,EAAe,YAAiB,IAAAvD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBI,YAAA,gBAA2B,CAAAJ,EAAA,UAAeI,YAAA,SAAAF,MAAA,CAA4BC,GAAA,IAAAuB,MAAA,MAAA0B,OAAA,aCDpLC,+DAAoB,CACtB,WACA,SACA,UACA,cACA,SACA,aACA,OACA,SACA,WACA,SACA,YACA,YACA,UACA,SACA,cACA,WACA,OACA,aACA,MACA,eAGEC,EAAkB,CACpB,WACA,SACA,UACA,cACA,SACA,aACA,OACA,SACA,WACA,SACA,YACA,YACA,UACA,SACA,cACA,WACA,OACA,aACA,MACA,aACA,SACA,cACA,QACA,OACA,QACA,MACA,UACA,OACA,QACA,aACA,YACA,aACA,UACA,MACA,WACA,iBACA,OACA,aACA,aACA,OACA,eACA,gBACA,WACA,WACA,QACA,UACA,MACA,WACA,SACA,SACA,UACA,SACA,YACA,MACA,SACA,eACA,QACA,SACA,SACA,UACA,WACA,SACA,MACA,QACA,MACA,WACA,aACA,OACA,QACA,QACA,YACA,SACA,WACA,OACA,WACA,QACA,WACA,aACA,SACA,QACA,WACA,OACA,SACA,cACA,WACA,eACA,QACA,WACA,QACA,QACA,YACA,YACA,SACA,SACA,MACA,YACA,MACA,aACA,WACA,UACA,QACA,aACA,OACA,OACA,aACA,SACA,gBACA,OACA,OACA,OACA,MACA,OACA,QACA,iBACA,QACA,aACA,YACA,QACA,QACA,SACA,OACA,UACA,QACA,aACA,QACA,cACA,QACA,SACA,aACA,WACA,YACA,UACA,SACA,cACA,WACA,OACA,0BACA,WACA,OACA,aACA,SACA,SACA,UACA,QACA,cACA,QACA,UACA,SACA,kBACA,aACA,MACA,UACA,YACA,YACA,aACA,aACA,WACA,QACA,QACA,QACA,SACA,WACA,YACA,WACA,YACA,OACA,QACA,eACA,MACA,WACA,gBACA,QACA,QACA,OACA,QACA,QACA,SACA,UACA,aACA,cACA,WACA,WACA,SACA,OACA,UACA,QACA,QACA,UACA,SACA,eACA,aACA,MACA,aACA,WACA,QACA,WACA,QACA,mBACA,WACA,MACA,aACA,UACA,QACA,YACA,UACA,WACA,MACA,aACA,OACA,MACA,MACA,YACA,UACA,QACA,kBACA,MACA,WACA,aACA,eACA,aACA,OACA,QACA,aACA,aACA,UACA,QACA,UACA,UACA,OACA,OACA,YACA,YACA,QACA,OACA,WACA,OACA,YACA,WACA,YACA,SACA,OACA,MACA,MACA,UACA,SACA,QACA,SACA,mBACA,OACA,WACA,UACA,SACA,YACA,OACA,OACA,YACA,QACA,SACA,SACA,QACA,UACA,MACA,cACA,MACA,YACA,QACA,SACA,YACA,SACA,aACA,YACA,QACA,YACA,WACA,eACA,cACA,SACA,SACA,SACA,SACA,QACA,eACA,QACA,MACA,WACA,SACA,YACA,MACA,UACA,MACA,UACA,cACA,QACA,QACA,aACA,YACA,WACA,cACA,MACA,QACA,aACA,OACA,SACA,aACA,OACA,OACA,QACA,YACA,aACA,OACA,UACA,YACA,mBACA,UACA,aACA,gBACA,OACA,OACA,cACA,WACA,SACA,eACA,YACA,OACA,YACA,SACA,SACA,QACA,iBACA,QACA,SACA,QACA,cACA,aACA,OACA,YACA,UACA,UACA,gBACA,SACA,OACA,WACA,Q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","file":"js/app.a79d873f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/quickdraw-minigame/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseModel.vue?vue&type=style&index=0&id=e8ae755e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseModel.vue?vue&type=style&index=0&id=e8ae755e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{attrs:{\"id\":\"nav\"}},[_c('ul',[_c('router-link',{staticClass:\"link\",attrs:{\"tag\":\"li\",\"to\":\"/\"}},[_vm._v(\"Discover QuickDraw\")]),_vm._v(\"|\\n      \"),_c('router-link',{staticClass:\"link\",attrs:{\"tag\":\"li\",\"to\":\"/train\"}},[_vm._v(\"Train your CNN\")])],1)]),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=174d042a&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('BaseModel')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('loading',{attrs:{\"active\":!_vm.loadingModelOver,\"can-cancel\":false,\"is-full-page\":true,\"color\":\"#428bca\"}}),_c('h1',{staticClass:\"header\"},[_vm._v(\"Draw all \"+_vm._s(_vm.getLengthNames)+\" classes !\")]),_c('div',{staticClass:\"main\"},[_c('label',[_vm._v(\"Select your difficulty\")]),_c('toggle-button',{staticClass:\"toggle\",attrs:{\"labels\":{checked: 'Big', unchecked: 'Small'},\"width\":70,\"color\":\"#428bca\"},model:{value:(_vm.toggleBigModel),callback:function ($$v) {_vm.toggleBigModel=$$v},expression:\"toggleBigModel\"}})],1),_c('main',{staticClass:\"main\"},[_c('div',{staticClass:\"main__content\"},[_vm._m(0),_c('div',{staticClass:\"slider\"},[_c('div',{staticClass:\"slider__label\"},[_vm._v(\"Brush width\")]),_c('vue-slider',{staticClass:\"slider__controls\",attrs:{\"min\":0,\"max\":100,\"interval\":1},model:{value:(_vm.brushWidth),callback:function ($$v) {_vm.brushWidth=$$v},expression:\"brushWidth\"}})],1)]),_c('v-chart',{attrs:{\"options\":_vm.getBar,\"autoresize\":\"\"}})],1),_c('div',{staticClass:\"buttons\"},[_c('button',{staticClass:\"button__add\",on:{\"click\":function($event){return _vm.submitDrawing()}}},[_vm._v(\"Submit\")]),_c('button',{staticClass:\"button__erase\",on:{\"click\":function($event){return _vm.clearCanvas()}}},[_vm._v(\"Clear\")])]),_c('div',{staticClass:\"ranking\"},[_c('vue-good-table',{attrs:{\"columns\":_vm.tableColumns,\"rows\":_vm.tableRows(),\"max-height\":\"400px\",\"fixed-header\":true}})],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main__canvas\"},[_c('canvas',{staticClass:\"canvas\",attrs:{\"id\":\"c\",\"width\":\"400\",\"height\":\"400\"}})])}]\n\nexport { render, staticRenderFns }","const SMALL_CLASS_NAMES = [\r\n    \"sailboat\",\r\n    \"pliers\",\r\n    \"see saw\",\r\n    \"garden hose\",\r\n    \"cactus\",\r\n    \"eyeglasses\",\r\n    \"nose\",\r\n    \"stairs\",\r\n    \"envelope\",\r\n    \"bucket\",\r\n    \"fireplace\",\r\n    \"swing set\",\r\n    \"lantern\",\r\n    \"banana\",\r\n    \"spreadsheet\",\r\n    \"elephant\",\r\n    \"fish\",\r\n    \"helicopter\",\r\n    \"axe\",\r\n    \"cell phone\",\r\n]\r\n\r\nconst BIG_CLASS_NAMES = [\r\n    \"sailboat\",\r\n    \"pliers\",\r\n    \"see saw\",\r\n    \"garden hose\",\r\n    \"cactus\",\r\n    \"eyeglasses\",\r\n    \"nose\",\r\n    \"stairs\",\r\n    \"envelope\",\r\n    \"bucket\",\r\n    \"fireplace\",\r\n    \"swing set\",\r\n    \"lantern\",\r\n    \"banana\",\r\n    \"spreadsheet\",\r\n    \"elephant\",\r\n    \"fish\",\r\n    \"helicopter\",\r\n    \"axe\",\r\n    \"cell phone\",\r\n    \"hammer\",\r\n    \"string bean\",\r\n    \"donut\",\r\n    \"star\",\r\n    \"radio\",\r\n    \"cat\",\r\n    \"diamond\",\r\n    \"frog\",\r\n    \"broom\",\r\n    \"coffee cup\",\r\n    \"speedboat\",\r\n    \"paper clip\",\r\n    \"bicycle\",\r\n    \"map\",\r\n    \"baseball\",\r\n    \"tennis racquet\",\r\n    \"line\",\r\n    \"dishwasher\",\r\n    \"paintbrush\",\r\n    \"fork\",\r\n    \"teddy - bear\",\r\n    \"The Mona Lisa\",\r\n    \"clarinet\",\r\n    \"flamingo\",\r\n    \"couch\",\r\n    \"rainbow\",\r\n    \"bed\",\r\n    \"lipstick\",\r\n    \"parrot\",\r\n    \"ladder\",\r\n    \"syringe\",\r\n    \"violin\",\r\n    \"megaphone\",\r\n    \"car\",\r\n    \"cookie\",\r\n    \"rollerskates\",\r\n    \"anvil\",\r\n    \"goatee\",\r\n    \"teapot\",\r\n    \"octagon\",\r\n    \"hospital\",\r\n    \"bridge\",\r\n    \"leg\",\r\n    \"skull\",\r\n    \"ear\",\r\n    \"mushroom\",\r\n    \"chandelier\",\r\n    \"pool\",\r\n    \"crown\",\r\n    \"apple\",\r\n    \"golf club\",\r\n    \"potato\",\r\n    \"calendar\",\r\n    \"book\",\r\n    \"trombone\",\r\n    \"stove\",\r\n    \"scorpion\",\r\n    \"blackberry\",\r\n    \"circle\",\r\n    \"sheep\",\r\n    \"sandwich\",\r\n    \"bird\",\r\n    \"bowtie\",\r\n    \"wine bottle\",\r\n    \"postcard\",\r\n    \"power outlet\",\r\n    \"chair\",\r\n    \"hedgehog\",\r\n    \"pants\",\r\n    \"bread\",\r\n    \"microwave\",\r\n    \"t - shirt\",\r\n    \"rabbit\",\r\n    \"guitar\",\r\n    \"dog\",\r\n    \"bulldozer\",\r\n    \"bus\",\r\n    \"light bulb\",\r\n    \"computer\",\r\n    \"hexagon\",\r\n    \"beach\",\r\n    \"skateboard\",\r\n    \"barn\",\r\n    \"jail\",\r\n    \"waterslide\",\r\n    \"cooler\",\r\n    \"traffic light\",\r\n    \"hand\",\r\n    \"harp\",\r\n    \"moon\",\r\n    \"toe\",\r\n    \"vase\",\r\n    \"cello\",\r\n    \"remote control\",\r\n    \"truck\",\r\n    \"microphone\",\r\n    \"underwear\",\r\n    \"rifle\",\r\n    \"drill\",\r\n    \"square\",\r\n    \"knee\",\r\n    \"giraffe\",\r\n    \"snail\",\r\n    \"camouflage\",\r\n    \"table\",\r\n    \"alarm clock\",\r\n    \"camel\",\r\n    \"shorts\",\r\n    \"lighthouse\",\r\n    \"suitcase\",\r\n    \"bottlecap\",\r\n    \"tractor\",\r\n    \"carrot\",\r\n    \"hockey puck\",\r\n    \"dumbbell\",\r\n    \"shoe\",\r\n    \"The Great Wall of China\",\r\n    \"campfire\",\r\n    \"foot\",\r\n    \"flip flops\",\r\n    \"monkey\",\r\n    \"helmet\",\r\n    \"bandage\",\r\n    \"bench\",\r\n    \"stethoscope\",\r\n    \"grass\",\r\n    \"mermaid\",\r\n    \"laptop\",\r\n    \"hot air balloon\",\r\n    \"floor lamp\",\r\n    \"cow\",\r\n    \"dolphin\",\r\n    \"asparagus\",\r\n    \"motorbike\",\r\n    \"skyscraper\",\r\n    \"strawberry\",\r\n    \"umbrella\",\r\n    \"brain\",\r\n    \"mouth\",\r\n    \"zebra\",\r\n    \"jacket\",\r\n    \"triangle\",\r\n    \"hurricane\",\r\n    \"bracelet\",\r\n    \"pineapple\",\r\n    \"rake\",\r\n    \"steak\",\r\n    \"baseball bat\",\r\n    \"arm\",\r\n    \"popsicle\",\r\n    \"flying saucer\",\r\n    \"mouse\",\r\n    \"horse\",\r\n    \"crab\",\r\n    \"piano\",\r\n    \"river\",\r\n    \"castle\",\r\n    \"compass\",\r\n    \"binoculars\",\r\n    \"ceiling fan\",\r\n    \"airplane\",\r\n    \"scissors\",\r\n    \"garden\",\r\n    \"bush\",\r\n    \"bathtub\",\r\n    \"clock\",\r\n    \"drums\",\r\n    \"lobster\",\r\n    \"flower\",\r\n    \"diving board\",\r\n    \"toothbrush\",\r\n    \"saw\",\r\n    \"sea turtle\",\r\n    \"squiggle\",\r\n    \"tooth\",\r\n    \"mountain\",\r\n    \"sword\",\r\n    \"aircraft carrier\",\r\n    \"necklace\",\r\n    \"cup\",\r\n    \"wine glass\",\r\n    \"lighter\",\r\n    \"elbow\",\r\n    \"blueberry\",\r\n    \"snowman\",\r\n    \"broccoli\",\r\n    \"sun\",\r\n    \"television\",\r\n    \"sock\",\r\n    \"pig\",\r\n    \"key\",\r\n    \"parachute\",\r\n    \"hot tub\",\r\n    \"shark\",\r\n    \"washing machine\",\r\n    \"hat\",\r\n    \"windmill\",\r\n    \"frying pan\",\r\n    \"fire hydrant\",\r\n    \"toothpaste\",\r\n    \"belt\",\r\n    \"beard\",\r\n    \"rhinoceros\",\r\n    \"headphones\",\r\n    \"matches\",\r\n    \"knife\",\r\n    \"snorkel\",\r\n    \"feather\",\r\n    \"duck\",\r\n    \"pond\",\r\n    \"paint can\",\r\n    \"firetruck\",\r\n    \"angel\",\r\n    \"bear\",\r\n    \"passport\",\r\n    \"cake\",\r\n    \"telephone\",\r\n    \"mosquito\",\r\n    \"hamburger\",\r\n    \"pencil\",\r\n    \"peas\",\r\n    \"ant\",\r\n    \"eye\",\r\n    \"mailbox\",\r\n    \"grapes\",\r\n    \"canoe\",\r\n    \"pillow\",\r\n    \"The Eiffel Tower\",\r\n    \"sink\",\r\n    \"backpack\",\r\n    \"octopus\",\r\n    \"finger\",\r\n    \"snowflake\",\r\n    \"tent\",\r\n    \"nail\",\r\n    \"submarine\",\r\n    \"wheel\",\r\n    \"church\",\r\n    \"toilet\",\r\n    \"purse\",\r\n    \"penguin\",\r\n    \"bee\",\r\n    \"streetlight\",\r\n    \"van\",\r\n    \"boomerang\",\r\n    \"train\",\r\n    \"peanut\",\r\n    \"stop sign\",\r\n    \"basket\",\r\n    \"wristwatch\",\r\n    \"ice cream\",\r\n    \"pizza\",\r\n    \"crocodile\",\r\n    \"lollipop\",\r\n    \"hockey stick\",\r\n    \"soccer ball\",\r\n    \"dragon\",\r\n    \"camera\",\r\n    \"cannon\",\r\n    \"zigzag\",\r\n    \"spoon\",\r\n    \"pickup truck\",\r\n    \"ocean\",\r\n    \"bat\",\r\n    \"stitches\",\r\n    \"shovel\",\r\n    \"palm tree\",\r\n    \"mug\",\r\n    \"hot dog\",\r\n    \"fan\",\r\n    \"sweater\",\r\n    \"cruise ship\",\r\n    \"cloud\",\r\n    \"whale\",\r\n    \"police car\",\r\n    \"saxophone\",\r\n    \"squirrel\",\r\n    \"smiley face\",\r\n    \"owl\",\r\n    \"house\",\r\n    \"school bus\",\r\n    \"yoga\",\r\n    \"spider\",\r\n    \"flashlight\",\r\n    \"tree\",\r\n    \"swan\",\r\n    \"panda\",\r\n    \"ambulance\",\r\n    \"calculator\",\r\n    \"pear\",\r\n    \"trumpet\",\r\n    \"lightning\",\r\n    \"animal migration\",\r\n    \"dresser\",\r\n    \"basketball\",\r\n    \"birthday cake\",\r\n    \"leaf\",\r\n    \"oven\",\r\n    \"house plant\",\r\n    \"keyboard\",\r\n    \"eraser\",\r\n    \"sleeping bag\",\r\n    \"moustache\",\r\n    \"door\",\r\n    \"hourglass\",\r\n    \"crayon\",\r\n    \"stereo\",\r\n    \"fence\",\r\n    \"roller coaster\",\r\n    \"onion\",\r\n    \"marker\",\r\n    \"tiger\",\r\n    \"screwdriver\",\r\n    \"watermelon\",\r\n    \"lion\",\r\n    \"butterfly\",\r\n    \"toaster\",\r\n    \"raccoon\",\r\n    \"picture frame\",\r\n    \"candle\",\r\n    \"face\",\r\n    \"kangaroo\",\r\n    \"snake\",\r\n    \"tornado\",\r\n    \"rain\"\r\n]\r\n\r\nexport {\r\n    SMALL_CLASS_NAMES,\r\n    BIG_CLASS_NAMES\r\n}","import * as tf from \"@tensorflow/tfjs\";\r\n\r\nfunction preprocess(img) {\r\n    /**\r\n     * Convert an image from canvas to a tensor that the model can process\r\n     */\r\n    return tf.tidy(() => {\r\n        //convert to a tensor\r\n        let tensor = tf.browser.fromPixels(img, 1);\r\n\r\n        //resize\r\n        const resized = tf.image\r\n            .resizeBilinear(tensor, [28, 28], true)\r\n            .toFloat();\r\n\r\n        //normalize\r\n        const offset = tf.scalar(255.0);\r\n        const normalized = tf.scalar(1.0).sub(resized.div(offset));\r\n\r\n        //We add a dimension to get a batch shape\r\n        const batched = normalized.expandDims(0);\r\n        return batched;\r\n    });\r\n}\r\n\r\nfunction debugTFMemory(msg) {\r\n    /**\r\n     * Log tensorflowjs used memory in console.\r\n     * It helps debug memory leaks\r\n     */\r\n    console.log(\"=================== \" + msg + \" ===================\");\r\n    console.log(tf.memory());\r\n    console.log(\"=================== \" + msg + \" ===================\");\r\n    console.log(\"\");\r\n}\r\n\r\nfunction roughSizeOfObject(object) {\r\n    /**\r\n     * https: //stackoverflow.com/a/11900218\r\n     */\r\n    var objectList = [];\r\n    var stack = [object];\r\n    var bytes = 0;\r\n\r\n    while (stack.length) {\r\n        var value = stack.pop();\r\n\r\n        if (typeof value === 'boolean') {\r\n            bytes += 4;\r\n        } else if (typeof value === 'string') {\r\n            bytes += value.length * 2;\r\n        } else if (typeof value === 'number') {\r\n            bytes += 8;\r\n        } else if (\r\n            typeof value === 'object' &&\r\n            objectList.indexOf(value) === -1\r\n        ) {\r\n            objectList.push(value);\r\n\r\n            for (var i in value) {\r\n                stack.push(value[i]);\r\n            }\r\n        }\r\n    }\r\n    return bytes;\r\n}\r\n\r\nexport {\r\n    preprocess,\r\n    debugTFMemory,\r\n    roughSizeOfObject\r\n};","import * as d3 from \"d3\";\r\nimport * as tf from \"@tensorflow/tfjs\";\r\nimport * as tfvis from \"@tensorflow/tfjs-vis\";\r\nimport {\r\n    preprocess\r\n} from \"./utils\"\r\n\r\nfunction openVisor() {\r\n    let visorInstance = tfvis.visor();\r\n    if (!visorInstance.isOpen()) {\r\n        visorInstance.toggle();\r\n    }\r\n}\r\n\r\nfunction getFitCallbacks() {\r\n    // https://codelabs.developers.google.com/codelabs/tfjs-training-classfication/index.html#5\r\n    const metrics = [\"loss\", \"val_loss\", \"acc\", \"val_acc\"];\r\n    const container = {\r\n        tab: \"Training\",\r\n        name: \"Model Training\",\r\n        styles: {\r\n            height: \"1000px\"\r\n        }\r\n    };\r\n    return tfvis.show.fitCallbacks(container, metrics);\r\n}\r\n\r\nfunction showClassAccuracy(labels, preds, class_names) {\r\n    tfvis.metrics\r\n        .perClassAccuracy(labels, preds, class_names.length)\r\n        .then(classAccuracy => {\r\n            const container = {\r\n                name: \"Accuracy\",\r\n                tab: \"Model Evaluation\"\r\n            };\r\n            tfvis.show.perClassAccuracy(\r\n                container,\r\n                classAccuracy,\r\n                class_names\r\n            );\r\n        });\r\n}\r\n\r\nfunction showConfusionMatrix(labels, preds, class_names) {\r\n    tfvis.metrics\r\n        .confusionMatrix(labels, preds, class_names.length)\r\n        .then(confMatrix => {\r\n            const container = {\r\n                name: \"Confusion Matrix\",\r\n                tab: \"Model Evaluation\"\r\n            };\r\n            tfvis.render.confusionMatrix(\r\n                container,\r\n                confMatrix,\r\n                class_names\r\n            );\r\n        });\r\n}\r\n\r\nfunction showModelInspection(model) {\r\n    const tabName = \"Model Inspection\"\r\n\r\n    const modelSummarySurface = {\r\n        name: \"Model Summary\",\r\n        tab: tabName\r\n    };\r\n    modelSummarySurface.innerHTML = \"\"; // clear older drawings\r\n\r\n    const conv1Surface = {\r\n        name: \"Conv2D Details\",\r\n        tab: tabName\r\n    };\r\n    conv1Surface.innerHTML = \"\"; // clear older drawings\r\n\r\n    const conv2Surface = {\r\n        name: \"Conv2D_2 Details\",\r\n        tab: tabName\r\n    };\r\n    conv2Surface.innerHTML = \"\"; // clear older drawings\r\n\r\n    const denseSurface = {\r\n        name: \"Dense_1 Details\",\r\n        tab: tabName\r\n    };\r\n    denseSurface.innerHTML = \"\"; // clear older drawings\r\n\r\n    tf.tidy(() => {\r\n        tfvis.show.modelSummary(modelSummarySurface, model);\r\n        tfvis.show.layer(conv1Surface, model.getLayer(\"conv2d_Conv2D1\"));\r\n        tfvis.show.layer(conv2Surface, model.getLayer(\"conv2d_Conv2D2\"));\r\n        tfvis.show.layer(denseSurface, model.getLayer(\"dense_Dense1\"));\r\n    });\r\n}\r\n\r\nfunction showInputData(data) {\r\n    const inputSurface = tfvis.visor().surface({\r\n        name: \"Latest drawings\",\r\n        tab: \"Input Data\"\r\n    });\r\n    const inputSurface_drawArea = inputSurface.drawArea;\r\n    inputSurface_drawArea.innerHTML = \"\"; // clear older drawings\r\n\r\n    let arr = data.map(data =>\r\n        tf.tidy(() => preprocess(data[\"img\"]).reshape([28, 28, 1]))\r\n    );\r\n    renderInputTable(inputSurface_drawArea, arr.slice(-60));\r\n}\r\n\r\nfunction showActivations(data, model) {\r\n    const tabName = \"Model Activations\"\r\n    const conv1ActivationSurface = tfvis.visor().surface({\r\n        name: \"Conv2D Activations\",\r\n        tab: tabName,\r\n        styles: {\r\n            height: 650\r\n        }\r\n    });\r\n    const conv1ActivationSurface_drawArea = conv1ActivationSurface.drawArea;\r\n    conv1ActivationSurface.innerHTML = \"\"; // clear older drawings\r\n\r\n    const conv2ActivationSurface = tfvis.visor().surface({\r\n        name: \"Conv2D_2 Activations\",\r\n        tab: tabName,\r\n        styles: {\r\n            width: 1000,\r\n            height: 650\r\n        }\r\n    });\r\n    const conv2ActivationSurface_drawArea = conv2ActivationSurface.drawArea;\r\n    conv2ActivationSurface.innerHTML = \"\"; // clear older drawings\r\n\r\n    let arr = data.map(data =>\r\n        tf.tidy(() => preprocess(data[\"img\"]).reshape([28, 28, 1]))\r\n    );\r\n\r\n    const [filters, filterActivations] = tf.tidy(() =>\r\n        getActivationTable(\"conv2d_Conv2D1\", model, arr.slice(-8))\r\n    );\r\n    const [filters_2, filterActivations_2] = tf.tidy(() =>\r\n        getActivationTable(\"conv2d_Conv2D2\", model, arr.slice(-8))\r\n    );\r\n\r\n    renderImageTable(\r\n        conv1ActivationSurface_drawArea,\r\n        filters,\r\n        filterActivations\r\n    );\r\n    renderImageTable(\r\n        conv2ActivationSurface_drawArea,\r\n        filters_2,\r\n        filterActivations_2\r\n    );\r\n\r\n    tf.dispose(filters);\r\n    tf.dispose(filterActivations);\r\n    tf.dispose(filters_2);\r\n    tf.dispose(filterActivations_2);\r\n    tf.dispose(arr);\r\n}\r\n\r\nfunction renderInputTable(drawArea, samples) {\r\n    for (let i = 0; i < samples.length; i++) {\r\n        let imageTensor = samples[i]\r\n        const canvas = document.createElement(\"canvas\");\r\n        canvas.width = 28;\r\n        canvas.height = 28;\r\n        canvas.style = \"margin: 4px;\";\r\n        tf.browser.toPixels(imageTensor, canvas).then(() => {\r\n            drawArea.appendChild(canvas);\r\n            imageTensor.dispose();\r\n        });\r\n    }\r\n}\r\n\r\nfunction renderImage(container, tensor, imageOpts) {\r\n    const resized = tf.tidy(() => tf.image.resizeNearestNeighbor(tensor, [imageOpts.height, imageOpts.width]).clipByValue(0.0, 1.0));\r\n    const canvas = container.querySelector('canvas') || document.createElement('canvas');\r\n    canvas.width = imageOpts.width;\r\n    canvas.height = imageOpts.height;\r\n    canvas.style = `margin: 4px; width:${imageOpts.width}px; height:${imageOpts.height}px`;\r\n    container.appendChild(canvas);\r\n    tf.browser.toPixels(resized, canvas).then(() => resized.dispose())\r\n} // Render a table of images, we will show the output for each filter\r\n// in the convolution.\r\n\r\nfunction renderImageTable(container, headerData, data) {\r\n    let table = d3.select(container).select('table');\r\n\r\n    if (table.size() === 0) {\r\n        table = d3.select(container).append('table');\r\n        table.append('thead').append('tr');\r\n        table.append('tbody');\r\n    }\r\n\r\n    const headers = table.select('thead').select('tr').selectAll('th').data(headerData);\r\n    const headersEnter = headers.enter().append('th');\r\n    headers.merge(headersEnter).each((d, i, group) => {\r\n        const node = group[i];\r\n\r\n        if (typeof d == 'string') {\r\n            node.innerHTML = d;\r\n        } else {\r\n            renderImage(node, d, {\r\n                width: 25,\r\n                height: 25\r\n            });\r\n        }\r\n    });\r\n    const rows = table.select('tbody').selectAll('tr').data(data);\r\n    const rowsEnter = rows.enter().append('tr');\r\n    const cells = rows.merge(rowsEnter).selectAll('td').data(d => d);\r\n    const cellsEnter = cells.enter().append('td');\r\n    cells.merge(cellsEnter).each((d, i, group) => {\r\n        const node = group[i];\r\n        renderImage(node, d, {\r\n            width: 40,\r\n            height: 40\r\n        });\r\n    });\r\n    cells.exit().remove();\r\n    rows.exit().remove();\r\n}\r\n\r\n// An 'activation' is the output of any of the internal layers of the\r\n// network.\r\nfunction getActivation(input, model, layer) {\r\n    const activationModel = tf.model({\r\n        inputs: model.input,\r\n        outputs: layer.output\r\n    });\r\n    return activationModel.predict(input);\r\n} // Render a tensor as an image on canvas object. We will render the\r\n// activations from the convolutional layers.\r\n\r\nfunction getActivationTable(layerName, model, samples) {\r\n    const exampleImageSize = 28;\r\n    const layer = model.getLayer(layerName); // Get the filters\r\n\r\n    let filters = tf.tidy(() => layer.kernel.val.transpose([3, 0, 1, 2]).unstack()); // It is hard to draw high dimensional filters so we just use a string\r\n\r\n    if (filters[0].shape[2] > 3) {\r\n        filters = filters.map((d, i) => `Filter ${i + 1}`);\r\n    }\r\n\r\n    filters.unshift('Input'); // Get the inputs\r\n\r\n    const xs = tf.tidy(() => {\r\n        samples = tf.stack(samples);\r\n        const numExamples = samples.shape[0];\r\n        return samples.reshape([numExamples, exampleImageSize, exampleImageSize, 1]); // Get the activations\r\n    })\r\n\r\n    const activations = tf.tidy(() => {\r\n        return getActivation(xs, model, layer).unstack();\r\n    });\r\n    const activationImageSize = activations[0].shape[0]; // e.g. 24\r\n\r\n    const numFilters = activations[0].shape[2]; // e.g. 8\r\n\r\n    let filterActivations = activations.map((activation, i) => {\r\n        // activation has shape [activationImageSize, activationImageSize, i];\r\n        const unpackedActivations = Array(numFilters).fill(0).map((_, i) => activation.slice([0, 0, i], [activationImageSize, activationImageSize, 1])); // prepend the input image\r\n        const inputExample = tf.tidy(() => xs.slice([i], [1]).reshape([exampleImageSize, exampleImageSize, 1]));\r\n        unpackedActivations.unshift(inputExample);\r\n        return unpackedActivations;\r\n    });\r\n    return [\r\n        filters,\r\n        filterActivations\r\n    ];\r\n}\r\n\r\nexport {\r\n    openVisor,\r\n    getFitCallbacks,\r\n    showClassAccuracy,\r\n    showConfusionMatrix,\r\n    showModelInspection,\r\n    showInputData,\r\n    showActivations,\r\n};","import * as tf from \"@tensorflow/tfjs\";\r\nimport {\r\n  callAndCheck\r\n} from \"@tensorflow/tfjs-core/dist/backends/webgl/webgl_util\";\r\nimport {\r\n  openVisor,\r\n  getFitCallbacks,\r\n  showClassAccuracy,\r\n  showConfusionMatrix\r\n} from \"./visualize\";\r\nimport {\r\n  preprocess\r\n} from \"./utils\";\r\n\r\nclass TFModel {\r\n  constructor() {\r\n    this.model = tf.sequential();\r\n  }\r\n\r\n  getModel() {\r\n    return this.model;\r\n  }\r\n\r\n  resetModel() {\r\n    tf.dispose(this.model);\r\n    this.model = tf.sequential();\r\n  }\r\n\r\n  build_CNN(numConv1 = 8, numConv2 = 16, numDense = 64, numClasses = 5) {\r\n    // https://codelabs.developers.google.com/codelabs/tfjs-training-classfication/index.html#4\r\n    const IMAGE_WIDTH = 28;\r\n    const IMAGE_HEIGHT = 28;\r\n    const IMAGE_CHANNELS = 1;\r\n\r\n    this.model.add(\r\n      tf.layers.conv2d({\r\n        inputShape: [IMAGE_WIDTH, IMAGE_HEIGHT, IMAGE_CHANNELS],\r\n        kernelSize: 5,\r\n        filters: numConv1,\r\n        strides: 1,\r\n        activation: \"relu\",\r\n        kernelInitializer: \"glorotNormal\",\r\n        name: \"conv2d_Conv2D1\"\r\n      })\r\n    );\r\n\r\n    this.model.add(\r\n      tf.layers.maxPooling2d({\r\n        poolSize: [2, 2],\r\n        strides: [2, 2]\r\n      })\r\n    );\r\n\r\n    this.model.add(\r\n      tf.layers.conv2d({\r\n        kernelSize: 5,\r\n        filters: numConv2,\r\n        strides: 1,\r\n        activation: \"relu\",\r\n        kernelInitializer: \"glorotNormal\",\r\n        name: \"conv2d_Conv2D2\"\r\n      })\r\n    );\r\n\r\n    this.model.add(\r\n      tf.layers.maxPooling2d({\r\n        poolSize: [2, 2],\r\n        strides: [2, 2]\r\n      })\r\n    );\r\n\r\n    this.model.add(tf.layers.flatten());\r\n\r\n    this.model.add(\r\n      tf.layers.dense({\r\n        units: numDense,\r\n        activation: \"relu\",\r\n        kernelInitializer: \"glorotNormal\",\r\n        name: \"intermediary_dense\"\r\n      })\r\n    );\r\n\r\n    this.model.add(\r\n      tf.layers.dropout({\r\n        rate: 0.4\r\n      })\r\n    );\r\n\r\n    // Our last layer is a dense layer\r\n    this.model.add(\r\n      tf.layers.dense({\r\n        units: numClasses,\r\n        kernelInitializer: \"glorotNormal\",\r\n        activation: \"softmax\",\r\n        name: \"dense_Dense1\"\r\n      })\r\n    );\r\n\r\n    this.model.compile({\r\n      optimizer: tf.train.adam(0.001),\r\n      loss: tf.metrics.categoricalCrossentropy,\r\n      metrics: [\"accuracy\"]\r\n    });\r\n\r\n    this.model.predict(tf.zeros([1, 28, 28, 1])).dataSync();\r\n  }\r\n\r\n  train_CNN(data, class_names) {\r\n    const BATCH_SIZE = 16;\r\n\r\n    openVisor();\r\n\r\n    function buildXs(arr) {\r\n      return tf.tidy(() => {\r\n        let data = arr.map(data => {\r\n          return preprocess(data[\"img\"]).reshape([28, 28, 1]);\r\n        });\r\n        return tf.stack(data);\r\n      });\r\n    }\r\n\r\n    function buildYs(arr, class_names) {\r\n      return tf.tidy(() => {\r\n        let labels = arr.map(data => {\r\n          return tf.oneHot(\r\n            class_names.indexOf(data[\"label\"]),\r\n            class_names.length\r\n          );\r\n        });\r\n        return tf.stack(labels);\r\n      });\r\n    }\r\n\r\n    const trainXs = buildXs(data);\r\n    const trainYs = buildYs(data, class_names);\r\n\r\n    return this.model\r\n      .fit(trainXs, trainYs, {\r\n        batchSize: BATCH_SIZE,\r\n        validationData: [trainXs, trainYs],\r\n        epochs: 20,\r\n        shuffle: true,\r\n        validationSplit: 0.2,\r\n        callbacks: getFitCallbacks()\r\n      })\r\n      .then(() => {\r\n        tf.tidy(() => {\r\n          const preds = this.model.predict(trainXs).argMax([-1]);\r\n          const labels = trainYs.argMax([-1]);\r\n\r\n          tf.dispose(trainXs);\r\n          tf.dispose(trainYs);\r\n\r\n          showClassAccuracy(preds, labels, class_names);\r\n          showConfusionMatrix(preds, labels, class_names);\r\n        });\r\n      });\r\n  }\r\n\r\n  loadModel(path_to_layers) {\r\n    return tf.loadLayersModel(path_to_layers).then(model => {\r\n      this.model = model;\r\n\r\n      // warm up the model\r\n      tf.tidy(() => this.model.predict(tf.zeros([1, 28, 28, 1])).dataSync());\r\n    });\r\n  }\r\n\r\n  predictClass(img) {\r\n    return tf.tidy(() => {\r\n      let preprocessed_img = preprocess(img);\r\n      return this.model.predict(preprocessed_img).dataSync();\r\n    });\r\n  }\r\n}\r\n\r\nfunction disposeTFVariables() {\r\n  tf.disposeVariables();\r\n}\r\n\r\nexport {\r\n  disposeTFVariables,\r\n  TFModel\r\n};","<!-- Base component of Discover Quickdraw page -->\r\n<template>\r\n  <div class=\"container\">\r\n    <!-- Loading screen -->\r\n    <loading :active=\"!loadingModelOver\" :can-cancel=\"false\" :is-full-page=\"true\" color=\"#428bca\"></loading>\r\n\r\n    <!-- Header for component -->\r\n    <h1 class=\"header\">Draw all {{getLengthNames}} classes !</h1>\r\n    <div class=\"main\">\r\n      <label>Select your difficulty</label>\r\n      <toggle-button\r\n        class=\"toggle\"\r\n        v-model=\"toggleBigModel\"\r\n        :labels=\"{checked: 'Big', unchecked: 'Small'}\"\r\n        :width=\"70\"\r\n        color=\"#428bca\"\r\n      />\r\n    </div>\r\n\r\n    <!-- Drawing part of the component -->\r\n    <main class=\"main\">\r\n      <div class=\"main__content\">\r\n        <div class=\"main__canvas\">\r\n          <canvas id=\"c\" class=\"canvas\" width=\"400\" height=\"400\"></canvas>\r\n        </div>\r\n        <div class=\"slider\">\r\n          <div class=\"slider__label\">Brush width</div>\r\n          <vue-slider\r\n            v-model=\"brushWidth\"\r\n            :min=\"0\"\r\n            :max=\"100\"\r\n            :interval=\"1\"\r\n            class=\"slider__controls\"\r\n          ></vue-slider>\r\n        </div>\r\n      </div>\r\n      <v-chart :options=\"getBar\" autoresize />\r\n    </main>\r\n\r\n    <!-- Row of buttons -->\r\n    <div class=\"buttons\">\r\n      <button class=\"button__add\" v-on:click=\"submitDrawing()\">Submit</button>\r\n      <button class=\"button__erase\" v-on:click=\"clearCanvas()\">Clear</button>\r\n    </div>\r\n\r\n    <!-- Table of all results -->\r\n    <div class=\"ranking\">\r\n      <vue-good-table\r\n        :columns=\"tableColumns\"\r\n        :rows=\"tableRows()\"\r\n        max-height=\"400px\"\r\n        :fixed-header=\"true\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"fabric\";\r\nimport { SMALL_CLASS_NAMES, BIG_CLASS_NAMES } from \"../utils/class_names\";\r\n\r\nimport ECharts from \"vue-echarts\";\r\nimport \"echarts/lib/chart/bar\";\r\nimport \"vue-good-table/dist/vue-good-table.css\";\r\nimport { VueGoodTable } from \"vue-good-table\";\r\nimport VueSlider from \"vue-slider-component\";\r\nimport \"vue-slider-component/theme/default.css\";\r\nimport Loading from \"vue-loading-overlay\";\r\nimport \"vue-loading-overlay/dist/vue-loading.css\";\r\n\r\nconst SMALL_MODEL_URL = \"./small_model/model.json\";\r\nconst BIG_MODEL_URL = \"./big_model/model.json\";\r\n\r\nimport { TFModel, disposeTFVariables } from \"../utils/model\";\r\n\r\nexport default {\r\n  name: \"BaseModel\",\r\n  components: {\r\n    \"v-chart\": ECharts,\r\n    VueGoodTable,\r\n    VueSlider,\r\n    Loading\r\n  },\r\n  data() {\r\n    return {\r\n      loadingModelOver: false, // responsible for loading screen visibility\r\n      raw_predictions: [], // stores raw probabilities of prediction for all classes\r\n      mousePressed: false, // propagate mouse press event into component\r\n      coords: [], // stores all coordinates of points on drawing\r\n      small_ranking: {}, // stores results of submit for small model\r\n      big_ranking: {}, // stores results of submit for big model\r\n      brushWidth: 20, // stores width of brush\r\n      toggleBigModel: false, // switch variable between small and big model\r\n      tableColumns: [\r\n        { label: \"Class\", field: \"class\" },\r\n        { label: \"Submitted\", field: \"submitted\", type: \"number\" }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    recordCoor(e) {\r\n      /**\r\n       * Record the x,y coordinates of mouse on canvas when mouse is pressed\r\n       */\r\n      var pointer = this.canvas.getPointer(event.e);\r\n      var posX = pointer.x;\r\n      var posY = pointer.y;\r\n\r\n      if (posX >= 0 && posY >= 0 && this.mousePressed) {\r\n        this.coords.push(pointer);\r\n      }\r\n    },\r\n    getMinBox() {\r\n      /**\r\n       * Get top left and bottom right coords of bounding box of the drawing\r\n       */\r\n      var coorX = this.coords.map(function(p) {\r\n        return p.x;\r\n      });\r\n      var coorY = this.coords.map(function(p) {\r\n        return p.y;\r\n      });\r\n\r\n      var min_coords = {\r\n        x: Math.min.apply(null, coorX),\r\n        y: Math.min.apply(null, coorY)\r\n      };\r\n      var max_coords = {\r\n        x: Math.max.apply(null, coorX),\r\n        y: Math.max.apply(null, coorY)\r\n      };\r\n\r\n      return {\r\n        min: min_coords,\r\n        max: max_coords\r\n      };\r\n    },\r\n    submitCanvas() {\r\n      /**\r\n       * Get image on canvas and submit it to the model for prediction\r\n       */\r\n      let input_img = this.getImageData();\r\n      if (!this.toggleBigModel) {\r\n        this.raw_predictions = this.small_model.predictClass(input_img);\r\n      } else {\r\n        this.raw_predictions = this.big_model.predictClass(input_img);\r\n      }\r\n    },\r\n    submitDrawing() {\r\n      /**\r\n       * Add a point to the top class in predictions in result table for model\r\n       */\r\n      const winClass = this.getTopClassNames[0];\r\n      this.$toasted.show(\r\n        \"Your submission for '\" + winClass + \"' has been taken\"\r\n      );\r\n      if (!this.toggleBigModel) {\r\n        this.small_ranking[winClass] = this.small_ranking[winClass] + 1;\r\n      } else {\r\n        this.big_ranking[winClass] = this.big_ranking[winClass] + 1;\r\n      }\r\n      this.clearCanvas();\r\n    },\r\n    clearCanvas() {\r\n      /**\r\n       * Resets the canvas\r\n       */\r\n      this.canvas.clear();\r\n      this.canvas.backgroundColor = \"#FFFFFF\";\r\n      this.raw_predictions = [];\r\n      this.coords = [];\r\n    },\r\n    getImageData() {\r\n      /**\r\n       * Get image data in canvas\r\n       */\r\n      const mbb = this.getMinBox();\r\n      const dpi = window.devicePixelRatio;\r\n\r\n      const imgData = this.canvas.contextContainer.getImageData(\r\n        mbb.min.x * dpi,\r\n        mbb.min.y * dpi,\r\n        (mbb.max.x - mbb.min.x) * dpi,\r\n        (mbb.max.y - mbb.min.y) * dpi\r\n      );\r\n      return imgData;\r\n    },\r\n    tableRows() {\r\n      /**\r\n       * Convert results object in component to list for vue-good-table\r\n       */\r\n      if (!this.toggleBigModel) {\r\n        return Object.keys(this.small_ranking).map(key => {\r\n          return { class: key, submitted: this.small_ranking[key] };\r\n        });\r\n      } else {\r\n        return Object.keys(this.big_ranking).map(key => {\r\n          return { class: key, submitted: this.big_ranking[key] };\r\n        });\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    findIndicesOfMax: function() {\r\n      /**\r\n       * Get indices of 5 classes with highest predicted probabilities\r\n       */\r\n      var outp = [];\r\n      for (var i = 0; i < this.raw_predictions.length; i++) {\r\n        outp.push(i); // add index to output array\r\n        if (outp.length > 5) {\r\n          let pred = this.raw_predictions;\r\n          outp.sort(function(a, b) {\r\n            return pred[b] - pred[a];\r\n          }); // descending sort the output array\r\n          outp.pop(); // remove the last index (index of smallest element in output array)\r\n        }\r\n      }\r\n      return outp;\r\n    },\r\n    findTopValues: function() {\r\n      /**\r\n       * Find probs for highest predicted indices from findIndicesOfMax\r\n       */\r\n      var outp = [];\r\n      let indices = this.findIndicesOfMax;\r\n      // show 5 greatest scores\r\n      for (var i = 0; i < indices.length; i++)\r\n        outp[i] = this.raw_predictions[indices[i]];\r\n      return outp;\r\n    },\r\n    getTopClassNames: function() {\r\n      /**\r\n       * Find classes for highest predicted indices from findIndicesOfMax\r\n       */\r\n      var outp = [];\r\n      let indices = this.findIndicesOfMax;\r\n      for (var i = 0; i < indices.length; i++)\r\n        outp[i] = this.getClassNames[indices[i]];\r\n      return outp;\r\n    },\r\n    getBar: function() {\r\n      /**\r\n       * Get specification of eCharts bar chart\r\n       */\r\n      return {\r\n        xAxis: {\r\n          type: \"category\",\r\n          data: this.getTopClassNames,\r\n          axisLabel: {\r\n            rotate: 45\r\n          }\r\n        },\r\n        yAxis: {\r\n          type: \"value\"\r\n        },\r\n        series: [\r\n          {\r\n            data: this.findTopValues,\r\n            type: \"bar\"\r\n          }\r\n        ]\r\n      };\r\n    },\r\n    getClassNames: function() {\r\n      /**\r\n       * Get all classes from models\r\n       */\r\n      if (!this.toggleBigModel) {\r\n        return SMALL_CLASS_NAMES;\r\n      } else {\r\n        return BIG_CLASS_NAMES;\r\n      }\r\n    },\r\n    getLengthNames: function() {\r\n      /**\r\n       * Get number of classes from the model\r\n       */\r\n      return this.getClassNames.length;\r\n    }\r\n  },\r\n  watch: {\r\n    brushWidth: function(val) {\r\n      this.canvas.freeDrawingBrush.width = val;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadingModelOver = false;\r\n\r\n    if (Object.entries(this.small_ranking).length === 0) {\r\n      SMALL_CLASS_NAMES.forEach(c => (this.small_ranking[c] = 0));\r\n    }\r\n    if (Object.entries(this.big_ranking).length === 0) {\r\n      BIG_CLASS_NAMES.forEach(c => (this.big_ranking[c] = 0));\r\n    }\r\n\r\n    this.canvas = new fabric.Canvas(\"c\", {\r\n      isDrawingMode: true\r\n    });\r\n    this.canvas.backgroundColor = \"#FFFFFF\";\r\n    this.canvas.freeDrawingBrush.width = this.brushWidth;\r\n    this.canvas.renderAll();\r\n\r\n    let that = this;\r\n    this.canvas.on(\"mouse:up\", function(e) {\r\n      that.submitCanvas();\r\n      that.mousePressed = false;\r\n    });\r\n    this.canvas.on(\"mouse:down\", function(e) {\r\n      that.mousePressed = true;\r\n    });\r\n    this.canvas.on(\"mouse:move\", function(e) {\r\n      that.recordCoor(e);\r\n    });\r\n\r\n    this.small_model = new TFModel();\r\n    this.big_model = new TFModel();\r\n\r\n    Promise.all([\r\n      this.small_model.loadModel(SMALL_MODEL_URL),\r\n      this.big_model.loadModel(BIG_MODEL_URL)\r\n    ]).then(() => {\r\n      this.loadingModelOver = true;\r\n    });\r\n  },\r\n\r\n  beforeDestroy: function() {\r\n    disposeTFVariables();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.buttons {\r\n  justify-content: flex-end;\r\n}\r\n\r\n.toggle {\r\n  margin-left: 1.5em;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseModel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseModel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BaseModel.vue?vue&type=template&id=e8ae755e&scoped=true&\"\nimport script from \"./BaseModel.vue?vue&type=script&lang=js&\"\nexport * from \"./BaseModel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BaseModel.vue?vue&type=style&index=0&id=e8ae755e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e8ae755e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <BaseModel />\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport BaseModel from \"@/components/BaseModel.vue\";\n\nexport default {\n  components: {\n    BaseModel\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=4fb22106&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('LearnableModel')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('loading',{attrs:{\"active\":!_vm.loadingModelOver,\"can-cancel\":false,\"is-full-page\":true,\"color\":\"#428bca\"}}),_c('h1',{staticClass:\"header\"},[_vm._v(\"Can we learn to recognize doodles ?\")]),_c('main',{staticClass:\"main\"},[_c('div',{staticClass:\"main__content\"},[_vm._m(0),_c('div',{staticClass:\"slider\"},[_c('div',{staticClass:\"slider_label\"},[_vm._v(\"Brush width\")]),_c('vue-slider',{staticClass:\"slider__controls\",attrs:{\"min\":0,\"max\":100,\"interval\":1},model:{value:(_vm.brushWidth),callback:function ($$v) {_vm.brushWidth=$$v},expression:\"brushWidth\"}})],1)]),_c('v-chart',{attrs:{\"options\":_vm.getBar,\"autoresize\":\"\"}})],1),_c('div',{staticClass:\"buttons\"},[_c('button',{staticClass:\"button__add\",on:{\"click\":function($event){return _vm.storeDrawing(_vm.class_names[0])}}},[_vm._v(\"Add \"+_vm._s(_vm.class_names[0]))]),_c('button',{staticClass:\"button__add\",on:{\"click\":function($event){return _vm.storeDrawing(_vm.class_names[1])}}},[_vm._v(\"Add \"+_vm._s(_vm.class_names[1]))]),_c('button',{staticClass:\"button__add\",on:{\"click\":function($event){return _vm.storeDrawing(_vm.class_names[2])}}},[_vm._v(\"Add \"+_vm._s(_vm.class_names[2]))]),_c('button',{staticClass:\"button__add\",on:{\"click\":function($event){return _vm.storeDrawing(_vm.class_names[3])}}},[_vm._v(\"Add \"+_vm._s(_vm.class_names[3]))]),_c('button',{staticClass:\"button__add\",on:{\"click\":function($event){return _vm.storeDrawing(_vm.class_names[4])}}},[_vm._v(\"Add \"+_vm._s(_vm.class_names[4]))]),_c('button',{staticClass:\"button__erase\",on:{\"click\":function($event){return _vm.clearCanvas()}}},[_vm._v(\"Clear\")])]),_c('hr'),_c('div',{staticClass:\"trainer__controls\"},[_c('button',{staticClass:\"button__train\",on:{\"click\":function($event){return _vm.trainModel()}}},[_vm._v(\"Train\")]),_c('button',{staticClass:\"button__erase\",on:{\"click\":function($event){return _vm.showVisor()}}},[_vm._v(\"Visor\")]),_c('button',{staticClass:\"button__erase\",on:{\"click\":function($event){return _vm.removeAllPhotos()}}},[_vm._v(\"Delete photos\")])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main__canvas\"},[_c('canvas',{staticClass:\"canvas\",attrs:{\"id\":\"c\",\"width\":\"400\",\"height\":\"400\"}})])}]\n\nexport { render, staticRenderFns }","import {\r\n    openDB,\r\n    deleteDB\r\n} from \"idb\";\r\n\r\nclass PhotosDAO {\r\n    constructor(db_name, store_name) {\r\n        this.db_name = db_name;\r\n        this.store_name = store_name;\r\n\r\n        openDB(db_name, 1, {\r\n            upgrade(db) {\r\n                if (!db.objectStoreNames.contains(store_name)) {\r\n                    db.createObjectStore(store_name, {\r\n                        autoIncrement: true\r\n                    });\r\n                }\r\n            }\r\n        }).then(db => this.db = db)\r\n    }\r\n\r\n    add_photo(img, label) {\r\n        return this.db.add(this.store_name, {\r\n            label: label,\r\n            img: img\r\n        })\r\n    }\r\n\r\n    get_range_photos(low, high) {\r\n        return this.db.getAll(this.store_name, IDBKeyRange.bound(low, high))\r\n    }\r\n\r\n    get_all_photos() {\r\n        return this.db.getAll(this.store_name)\r\n    }\r\n\r\n    count_photos() {\r\n        return this.db.count(this.store_name);\r\n    }\r\n\r\n    remove_all_items() {\r\n        return this.db.clear(this.store_name);\r\n    }\r\n\r\n    async drop_database() {\r\n        await deleteDB(this.db_name)\r\n    }\r\n}\r\n\r\nexport {\r\n    PhotosDAO\r\n};","<!-- Base component of Train your CNN page -->\r\n<template>\r\n  <div class=\"container\">\r\n    <!-- Loading screen -->\r\n    <loading :active=\"!loadingModelOver\" :can-cancel=\"false\" :is-full-page=\"true\" color=\"#428bca\"></loading>\r\n\r\n    <!-- Header for component -->\r\n    <h1 class=\"header\">Can we learn to recognize doodles ?</h1>\r\n\r\n    <!-- Drawing part of the component -->\r\n    <main class=\"main\">\r\n      <div class=\"main__content\">\r\n        <div class=\"main__canvas\">\r\n          <canvas id=\"c\" class=\"canvas\" width=\"400\" height=\"400\"></canvas>\r\n        </div>\r\n        <div class=\"slider\">\r\n          <div class=\"slider_label\">Brush width</div>\r\n          <vue-slider\r\n            v-model=\"brushWidth\"\r\n            :min=\"0\"\r\n            :max=\"100\"\r\n            :interval=\"1\"\r\n            class=\"slider__controls\"\r\n          ></vue-slider>\r\n        </div>\r\n      </div>\r\n      <v-chart :options=\"getBar\" autoresize />\r\n    </main>\r\n\r\n    <!-- Row of buttons -->\r\n    <div class=\"buttons\">\r\n      <button class=\"button__add\" v-on:click=\"storeDrawing(class_names[0])\">Add {{class_names[0]}}</button>\r\n      <button class=\"button__add\" v-on:click=\"storeDrawing(class_names[1])\">Add {{class_names[1]}}</button>\r\n      <button class=\"button__add\" v-on:click=\"storeDrawing(class_names[2])\">Add {{class_names[2]}}</button>\r\n      <button class=\"button__add\" v-on:click=\"storeDrawing(class_names[3])\">Add {{class_names[3]}}</button>\r\n      <button class=\"button__add\" v-on:click=\"storeDrawing(class_names[4])\">Add {{class_names[4]}}</button>\r\n      <button class=\"button__erase\" v-on:click=\"clearCanvas()\">Clear</button>\r\n    </div>\r\n    <hr />\r\n    <div class=\"trainer__controls\">\r\n      <button class=\"button__train\" v-on:click=\"trainModel()\">Train</button>\r\n      <button class=\"button__erase\" v-on:click=\"showVisor()\">Visor</button>\r\n      <button class=\"button__erase\" v-on:click=\"removeAllPhotos()\">Delete photos</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"fabric\";\r\n\r\nimport VueSlider from \"vue-slider-component\";\r\nimport \"vue-slider-component/theme/default.css\";\r\nimport Loading from \"vue-loading-overlay\";\r\nimport \"vue-loading-overlay/dist/vue-loading.css\";\r\n\r\nimport ECharts from \"vue-echarts\";\r\nimport \"echarts/lib/chart/bar\";\r\n\r\nimport { disposeTFVariables, TFModel } from \"../utils/model\";\r\nimport {\r\n  showModelInspection,\r\n  showInputData,\r\n  showActivations,\r\n  openVisor\r\n} from \"../utils/visualize\";\r\nimport { PhotosDAO } from \"../utils/data\";\r\n\r\nexport default {\r\n  name: \"LearnableModel\",\r\n  components: {\r\n    \"v-chart\": ECharts,\r\n    VueSlider,\r\n    Loading\r\n  },\r\n  data() {\r\n    return {\r\n      class_names: [\"apple\", \"pear\", \"banana\", \"litchi\", \"mango\"], // name of classes to draw\r\n      loadingModelOver: false, // responsible for loading screen visibility\r\n      raw_predictions: [], // stores raw probabilities of prediction for all classes\r\n      mousePressed: false, // propagate mouse press event into component\r\n      coords: [], // stores all coordinates of points on drawing\r\n      brushWidth: 20, // stores width of brush\r\n      numConv1: 8, // dimension of first conv layer\r\n      numConv2: 16, // dimension of second conv layer\r\n      numDense: 64, // dimension of dense layer\r\n      numEpochs: 20 // number training epochs\r\n    };\r\n  },\r\n  methods: {\r\n    recordCoor(e) {\r\n      /**\r\n       * Record the x,y coordinates of mouse on canvas when mouse is pressed\r\n       */\r\n      var pointer = this.canvas.getPointer(event.e);\r\n      var posX = pointer.x;\r\n      var posY = pointer.y;\r\n\r\n      if (posX >= 0 && posY >= 0 && this.mousePressed) {\r\n        this.coords.push(pointer);\r\n      }\r\n    },\r\n    getMinBox() {\r\n      /**\r\n       * Get top left and bottom right coords of bounding box of the drawing\r\n       */\r\n      var coorX = this.coords.map(function(p) {\r\n        return p.x;\r\n      });\r\n      var coorY = this.coords.map(function(p) {\r\n        return p.y;\r\n      });\r\n\r\n      var min_coords = {\r\n        x: Math.min.apply(null, coorX),\r\n        y: Math.min.apply(null, coorY)\r\n      };\r\n      var max_coords = {\r\n        x: Math.max.apply(null, coorX),\r\n        y: Math.max.apply(null, coorY)\r\n      };\r\n\r\n      return {\r\n        min: min_coords,\r\n        max: max_coords\r\n      };\r\n    },\r\n    submitCanvas() {\r\n      /**\r\n       * Get image on canvas and submit it to the model for prediction\r\n       */\r\n      this.raw_predictions = this.model.predictClass(this.getImageData());\r\n    },\r\n    clearCanvas() {\r\n      /**\r\n       * Resets the canvas\r\n       */\r\n      this.canvas.clear();\r\n      this.canvas.backgroundColor = \"#FFFFFF\";\r\n      this.raw_predictions = [];\r\n      this.coords = [];\r\n    },\r\n    trainModel() {\r\n      /**\r\n       * Train the CNN model\r\n       */\r\n      this.$toasted.show(\"A new training was launched\");\r\n\r\n      this.db.get_all_photos().then(photos => {\r\n        this.model.resetModel();\r\n        this.model.build_CNN();\r\n        this.model.train_CNN(photos, this.class_names).then(() => {\r\n          this.$toasted.show(\"Training over\");\r\n        });\r\n      });\r\n    },\r\n    showVisor() {\r\n      /**\r\n       * Show the visor with input data and activation tab\r\n       */\r\n      openVisor();\r\n\r\n      showModelInspection(this.model.getModel());\r\n\r\n      this.db.count_photos().then(count => {\r\n        this.db.get_range_photos(count - 60, count).then(photos => {\r\n          showInputData(photos);\r\n          showActivations(photos, this.model.getModel());\r\n        });\r\n      });\r\n    },\r\n    storeDrawing(obj) {\r\n      let img_data = this.getImageData();\r\n\r\n      let that = this;\r\n      this.db.add_photo(img_data, obj).then(() => {\r\n        this.$toasted.show(\"Thanks for adding a '\" + obj + \"'\");\r\n        that.clearCanvas();\r\n      });\r\n    },\r\n    removeAllPhotos() {\r\n      this.db\r\n        .remove_all_items()\r\n        .then(() => this.$toasted.show(\"Removed all photos\"));\r\n    },\r\n    getImageData() {\r\n      /**\r\n       * Get image data in canvas\r\n       */\r\n      const mbb = this.getMinBox();\r\n      const dpi = window.devicePixelRatio;\r\n\r\n      const imgData = this.canvas.contextContainer.getImageData(\r\n        mbb.min.x * dpi,\r\n        mbb.min.y * dpi,\r\n        (mbb.max.x - mbb.min.x) * dpi,\r\n        (mbb.max.y - mbb.min.y) * dpi\r\n      );\r\n      return imgData;\r\n    }\r\n  },\r\n  computed: {\r\n    findIndicesOfMax: function() {\r\n      /**\r\n       * Get indices of 5 classes with highest predicted probabilities\r\n       */\r\n      var outp = [];\r\n      for (var i = 0; i < this.raw_predictions.length; i++) {\r\n        outp.push(i); // add index to output array\r\n        if (outp.length > 5) {\r\n          let pred = this.raw_predictions;\r\n          outp.sort(function(a, b) {\r\n            return pred[b] - pred[a];\r\n          }); // descending sort the output array\r\n          outp.pop(); // remove the last index (index of smallest element in output array)\r\n        }\r\n      }\r\n      return outp;\r\n    },\r\n    findTopValues: function() {\r\n      /**\r\n       * Find probs for highest predicted indices from findIndicesOfMax\r\n       */\r\n      var outp = [];\r\n      let indices = this.findIndicesOfMax;\r\n      // show 5 greatest scores\r\n      for (var i = 0; i < indices.length; i++)\r\n        outp[i] = this.raw_predictions[indices[i]];\r\n      return outp;\r\n    },\r\n    getTopClassNames: function() {\r\n      /**\r\n       * Find classes for highest predicted indices from findIndicesOfMax\r\n       */\r\n      var outp = [];\r\n      let indices = this.findIndicesOfMax;\r\n      for (var i = 0; i < indices.length; i++)\r\n        outp[i] = this.class_names[indices[i]];\r\n      return outp;\r\n    },\r\n    getBar: function() {\r\n      /**\r\n       * Get specification of eCharts bar chart\r\n       */\r\n      return {\r\n        xAxis: {\r\n          type: \"category\",\r\n          data: this.getTopClassNames,\r\n          axisLabel: {\r\n            rotate: 45\r\n          }\r\n        },\r\n        yAxis: {\r\n          type: \"value\"\r\n        },\r\n        series: [\r\n          {\r\n            data: this.findTopValues,\r\n            type: \"bar\"\r\n          }\r\n        ]\r\n      };\r\n    }\r\n  },\r\n  watch: {\r\n    brushWidth: function(val) {\r\n      this.canvas.freeDrawingBrush.width = val;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadingModelOver = false;\r\n\r\n    this.canvas = new fabric.Canvas(\"c\", {\r\n      isDrawingMode: false\r\n    });\r\n    this.canvas.backgroundColor = \"#FFFFFF\";\r\n    this.canvas.freeDrawingBrush.width = this.brushWidth;\r\n    this.canvas.renderAll();\r\n\r\n    let that = this;\r\n    this.canvas.on(\"mouse:up\", function(e) {\r\n      that.submitCanvas();\r\n      that.mousePressed = false;\r\n    });\r\n    this.canvas.on(\"mouse:down\", function(e) {\r\n      that.mousePressed = true;\r\n    });\r\n    this.canvas.on(\"mouse:move\", function(e) {\r\n      that.recordCoor(e);\r\n    });\r\n\r\n    this.model = new TFModel();\r\n    this.model.build_CNN();\r\n\r\n    this.loadingModelOver = true;\r\n    this.canvas.isDrawingMode = true;\r\n\r\n    this.db = new PhotosDAO(\"quickdraw\", \"photos\");\r\n  },\r\n  beforeDestroy: function() {\r\n    disposeTFVariables();\r\n    this.db.drop_database();\r\n  }\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.buttons {\r\n  justify-content: center;\r\n}\r\n\r\n.button__train {\r\n  background-color: #5cb85c;\r\n  color: #fcfcfc;\r\n  border: none;\r\n  border-radius: 0.5em;\r\n  padding: 1em 2em;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  display: inline-block;\r\n  font-size: 1em;\r\n  cursor: pointer;\r\n  margin-right: 1em;\r\n}\r\n\r\n.button__train:hover {\r\n  background-color: #111;\r\n}\r\n\r\n.trainer {\r\n  display: grid;\r\n  grid-template-columns: [labels] auto [controls] 1fr;\r\n  grid-auto-flow: row;\r\n  grid-gap: 0.8em;\r\n  padding: 1.2em;\r\n}\r\n.trainer > label {\r\n  grid-column: labels;\r\n  grid-row: auto;\r\n}\r\n.trainer > input {\r\n  grid-column: controls;\r\n  grid-row: auto;\r\n  border: none;\r\n  padding: 1em;\r\n}\r\n\r\n.trainer__controls {\r\n  padding: 1.2em;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LearnableModel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LearnableModel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LearnableModel.vue?vue&type=template&id=6887bfb4&scoped=true&\"\nimport script from \"./LearnableModel.vue?vue&type=script&lang=js&\"\nexport * from \"./LearnableModel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LearnableModel.vue?vue&type=style&index=0&id=6887bfb4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6887bfb4\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <LearnableModel />\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport LearnableModel from \"@/components/LearnableModel.vue\";\n\nexport default {\n  components: {\n    LearnableModel\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Train.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Train.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Train.vue?vue&type=template&id=a378d702&\"\nimport script from \"./Train.vue?vue&type=script&lang=js&\"\nexport * from \"./Train.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Home from './views/Home.vue'\nimport Train from './views/Train.vue'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [{\n      path: '/',\n      name: 'home',\n      component: Home\n    },\n    {\n      path: '/train',\n      name: 'train',\n      component: Train\n      // route level code-splitting\n      // this generates a separate chunk (about.[hash].js) for this route\n      // which is lazy-loaded when the route is visited.\n      //component: () => import( /* webpackChunkName: \"about\" */ './views/Train.vue')\n    }\n  ]\n})","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nimport Toasted from \"vue-toasted\";\r\nVue.use(Toasted, {\r\n  position: \"bottom-left\",\r\n  duration: 8000,\r\n  className: ['toast-css']\r\n})\r\n\r\nimport ToggleButton from 'vue-js-toggle-button'\r\nVue.use(ToggleButton)\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  router,\r\n  render: h => h(App)\r\n}).$mount('#app')","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LearnableModel.vue?vue&type=style&index=0&id=6887bfb4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LearnableModel.vue?vue&type=style&index=0&id=6887bfb4&scoped=true&lang=css&\""],"sourceRoot":""}